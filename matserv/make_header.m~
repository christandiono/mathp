function hr=make_header(protocol, code, localpath)

hr{1}=[protocol ' ' num2str(code) ' ' code_lookup(code)];
hr{2}=['Date: ' datestr(now,'ddd, dd mmm yyyy HH:MM:SS')];

D=dir(localpath);

Dnametemp=D.name(end:-1:1);

locations=findstr(Dnametemp,'.');

location=locations(1);

extension=Dnametemp(location-1:-1:1);

switch extention
    case 'ico'
        mimetype='image/x-icon';
    case 'html'
        mimetype='text/html';
    otherwise
        mimetype='application/x-octet-stream';
end


hr{3}=['Content-Type: ' mimetype '; charset=utf-8';
hr{4}='Connection: close';
hr{5}='';


end


function cl=code_lookup(code)

    switch code
        case 200
            cl='OK';
        case 403
            cl='Forbidden';
        case 404
            cl='Not Found';
        case 500
            cl='Internal Server Error';
        otherwise
            error(['wtf status code was ' char(code)])
    end

end
    
